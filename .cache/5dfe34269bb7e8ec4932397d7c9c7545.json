{"dependencies":[],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction addLocationToDB2(set, newName) {\n  console.log('this', this);\n  console.log(somevar, somethingChanged);\n\n  /*   under what country to add it\n       should i update whole country document?\n  */\n  const self = this;\n\n  if (set == 'country') {\n    //console.log('vue locs', deviceUserData)\n\n    let index = this.countries.findIndex(country => country.name == newName);\n\n    if (index > -1) {\n      alert(`${newName}\\nis already in your database`);\n      return;\n    }\n    const obj = [{ name: newName,\n      cities: [{\n        name: 'all cities',\n        shops: [{\n          name: 'all shops',\n          products: []\n        }]\n      }]\n    }];\n\n    //window.\n    //var somethingChanged = false\n    //const  = \n    function copyUserDataI() {\n      var somethingChanged = false;\n      //var somevar = 1\n      return copyUserData([obj], self.countries);\n      //const xx = function(){ console.log('hi', somevar)}//test1\n      //return xx\n      //console.log( typeof test1)\n      //return copyUserData//([obj], self.countries)\n    }\n\n    console.log('copyUserDataI', typeof copyUserDataI);\n    let idk = copyUserDataI();\n    //copyUserDataI([obj], self.countries)\n\n    /*.then(final=>{\n         console.log('somethingChanged B? ',somethingChanged)\n         console.log('location data to save', final===this.countries, final)\n          // save each country without prods to device user IDB\n         //if (somethingChanged) final.forEach( country => deviceUserData.countries.put(country) )\n         //return initializeCountriesState(this, final)\n    })*/\n\n    //deviceUserData.userData.put({userName: this.userName || 0, countries: obj})\n    //window.deviceUserData.userData.add(obj)\n    /*     .then(status => { console.log('status',status)\n              //getOwnDBData(this.userName)\n         })\n              .then(data => {\n                        //initalCountryData(this, data)\n                        //this.countries = data\n              }) // then select newly added thing\n    //\\ )*/\n\n    //})\n  } else if (set == 'city') {\n    let countryData = this.countries.find(cntry => cntry.name == this.currentCountry);\n    console.log('   adding city', this.countries, \"\\n\", countryData);\n\n    // check if this city is already there\n    let index = countryData.cities.findIndex(city => city == newName);\n\n    if (index > -1) {\n      alert(`${newName}\\nis already in your database`);\n      return;\n    }\n    countryData.cities.push({\n      name: newName,\n      shops: [{\n        name: 'all shops',\n        products: []\n      }]\n    });\n    window.deviceUserData.countries.put(countryData).then(status => {\n\n      this.getOwnDBData().then(data => this.countries = data);\n      console.log('updated Vue data', this.countries);\n    });\n  } else if (set == 'shop') {\n    let countryData = this.countries.find(cntry => cntry.name === this.currentCountry);\n\n    let cityData = countryData.cities.find(city => city.name === this.currentCity);\n    console.log('   adding shop', cityData);\n    // check its not there already\n    if (cityData.shops.findIndex(shop => shop.name === newName) > -1) {\n      alert(`${newName}\\nis already in your database`);\n      return;\n    }\n\n    cityData.shops.push({\n      name: newName,\n      products: []\n    });\n    console.log('   new cntry data', this.currentCountry, countryData);\n    window.deviceUserData.countries.put(countryData).then(status => {\n      console.log('   updated Vue data', this.countries);\n      this.getOwnDBData().then(data => this.countries = data); // then select newly added thing\n    });\n  }\n  //this.locationInputShown= false\n  //this.newLocation = \"\"\n}\n\nexports.addLocationToDB2 = addLocationToDB2;"},"hash":"25a04aa73a9044e5375ef214e81a0b5a"}